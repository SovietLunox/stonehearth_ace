<script type="text/x-handlebars" data-template-name="mercantile">
<div id="mercantile" class="gui">
   <div class="window">
      <div class="title">{{i18n stonehearth_ace:ui.game.mercantile.title}}<div class="closeButton"></div></div>

      <div id="activeTab" class="tabPage">
         <div id="activeContainer">
            <div class="info">
               <!--show # merchants spawned (range) and # of tier stalls, indicator for restricted by # stalls-->
               <div id="numMerchants">{{{view.numMerchants}}}</div>
            </div>
            <div id="merchants" class="downSection">
               {{#each merchant in view.merchants}}
               <div {{bind-attr merchant-id=merchant.id class=":merchant merchant.has_stall:hasStall:"}}>
                  <div {{bind-attr class=":name merchant.tier_class"}}>{{merchant.display_name}}</div>
                  <div class="portrait merchantPortrait"></div>
                  <img {{bind-attr class=":shop merchant.is_exclusive:exclusive:"}}/>
                  {{#if merchant.has_stall}}
                  <div class="portrait stallPortrait"></div>
                  {{/if}}
               </div>
               {{/each}}
            </div>
            {{#if view.hasAvailableStalls}}
            <div id="availableStalls" class="downSection">
               {{#each stall in view.availableStalls}}
               <div class="availableStall" {{bind-attr stall-type-id=stall.id}}>
                  <img {{bind-attr src="stall.icon" class=":stallIcon stall.tier_class"}}/>
                  <div {{bind-attr class=":num stall.num_class"}}>{{stall.total}}</div>
               </div>
               {{/each}}
            </div>
            {{/if}}
         </div>
      </div>

      <div id="preferencesTab" class="tabPage">
         <div id="preferencesContainer">
            <div class="info">
               <!--show # of preference settings are and can be made at once -->
               <div id="numPreferences">{{{view.numPreferences}}}</div>
            </div>
            <div id="allPreferences">
               <div id="categoryPreferences" class="downSection">
                  <div id="categories">
                     <!--show table headers for encourage/enable/disable-->
                     <table id="categoriesTable">
                        {{#each category in view.categories}}
                        <tr class="category">
                           <td class="categoryIcon">
                              <img class="icon" {{bind-attr src="category.icon"}}/>
                           </td>
                           <td class="categoryName">
                              <div class="name">{{i18n_key category.display_name}}</div>
                           </td>
                           <td class="encourage setting" {{bind-attr category=category.category}}>
                              <a href="#" {{action "encourageCategory" category.category target=view}}>
                                 <div {{bind-attr class=':uisounds category.encourageEnabled:enabled:disabled category.isEncouraged:selected:'}}>
                                    <img class="encourageCategory"/>
                                 </div>
                              </a>
                           </td>
                           <td class="enable setting" {{bind-attr category=category.category}}>
                              <a href="#" {{action "enableCategory" category.category target=view}}>
                                 <div {{bind-attr class=':uisounds category.enableEnabled:enabled:disabled category.isEnabled:selected:'}}>
                                    <img class="enableCategory"/>
                                 </div>
                              </a>
                           </td>
                           <td class="disable setting" {{bind-attr category=category.category}}>
                              <a href="#" {{action "disableCategory" category.category target=view}}>
                                 <div {{bind-attr class=':uisounds category.disableEnabled:enabled:disabled category.isDisabled:selected:'}}>
                                    <img class="disableCategory"/>
                                 </div>
                              </a>
                           </td>
                        </tr>
                        {{/each}}
                     </table>
                  </div>
               </div>
               <div id="exclusivePreferences" class="downSection">
               </div>
            </div>
         </div>
      </div>
   </div>

   <div id="tabs">
      <div class="tab active" tabPage="activeTab">{{i18n stonehearth_ace:ui.game.mercantile.active.title}}</div>
      <div class="tab" tabPage="preferencesTab">{{i18n stonehearth_ace:ui.game.mercantile.preferences.title}}</div>
   </div>

</div>
</script>
